{% extends 'nav.html' %}
{% load static %}
{% block content %}
  <div class="container" style="position: relative; top: 200px;">
    <h2 class="text-center">Upload a Poster</h2>

    <!-- Display Messages -->
    {% if messages %}
        <div id="message-container" class="mt-3">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="card p-4 shadow-lg">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="poster" class="form-label">Select Poster Image</label>
                <input type="file" class="form-control" id="poster" name="poster" required>

                <label for="expire" class="form-label mt-2">Select Expiry Date</label>
                <input type="date" class="form-control" name="expire" id="expire" required>
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>
        </form>
    </div>

    <a href="{% url 'shop_posters' %}" class="btn btn-success" 
       style="padding: 10px 20px; background: green; color: white; text-decoration: none; border-radius: 5px;">
        View Shop Posters
    </a>
</div>

<script>
    // Set the minimum date to today
    document.addEventListener("DOMContentLoaded", function () {
        let today = new Date().toISOString().split("T")[0];
        document.getElementById("expire").setAttribute("min", today);
    });

    // Auto-remove messages after 3 seconds
    setTimeout(function() {
        let messageContainer = document.getElementById("message-container");
        if (messageContainer) {
            messageContainer.style.transition = "opacity 0.5s";
            messageContainer.style.opacity = "0";
            setTimeout(() => messageContainer.remove(), 500);
        }
    }, 3000);
</script>

{% endblock content %}
